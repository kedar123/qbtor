document.write('<link rel="stylesheet" href="http://gist.github.com/stylesheets/gist/embed.css"/>')




document.write('<div id="gist-4005" class="gist">\
      <div class="gist-file">\
        <div class="gist-data gist-syntax">\
            <div class="gist-highlight"><pre><div class="line" id="LC1"><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span></div><div class="line" id="LC2"><span class="nb">require</span> <span class="s1">&#39;wesabe&#39;</span></div><div class="line" id="LC3">&nbsp;</div><div class="line" id="LC4"><span class="n">wesabe</span> <span class="o">=</span> <span class="no">Wesabe</span><span class="o">.</span><span class="n">new</span> <span class="no">USERNAME</span><span class="p">,</span> <span class="no">PASSWORD</span></div><div class="line" id="LC5">&nbsp;</div><div class="line" id="LC6"><span class="c1"># fetch your account data</span></div><div class="line" id="LC7"><span class="n">accounts</span> <span class="o">=</span> <span class="n">wesabe</span><span class="o">.</span><span class="n">accounts</span></div><div class="line" id="LC8"><span class="n">max_name</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">size</span><span class="p">}</span><span class="o">.</span><span class="n">max</span></div><div class="line" id="LC9"><span class="n">max_balance</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span><span class="n">a</span><span class="o">.</span><span class="n">balance</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">size</span><span class="p">}</span><span class="o">.</span><span class="n">max</span></div><div class="line" id="LC10">&nbsp;</div><div class="line" id="LC11"><span class="n">max_name</span> <span class="o">=</span> <span class="o">[</span><span class="n">max_name</span><span class="p">,</span> <span class="s2">&quot;Account&quot;</span><span class="o">.</span><span class="n">size</span><span class="o">].</span><span class="n">max</span></div><div class="line" id="LC12"><span class="n">max_balance</span> <span class="o">=</span> <span class="o">[</span><span class="n">max_balance</span><span class="p">,</span> <span class="s2">&quot;Balance&quot;</span><span class="o">.</span><span class="n">size</span><span class="o">].</span><span class="n">max</span></div><div class="line" id="LC13">&nbsp;</div><div class="line" id="LC14"><span class="c1"># write header</span></div><div class="line" id="LC15"><span class="nb">puts</span> <span class="s2">&quot;%-</span><span class="si">#{</span><span class="n">max_name</span><span class="si">}</span><span class="s2">s  %</span><span class="si">#{</span><span class="n">max_balance</span><span class="si">}</span><span class="s2">s&quot;</span> <span class="o">%</span> <span class="o">[</span><span class="s2">&quot;Account&quot;</span><span class="p">,</span> <span class="s2">&quot;Balance&quot;</span><span class="o">]</span></div><div class="line" id="LC16"><span class="nb">puts</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">max_name</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">max_balance</span><span class="p">)</span></div><div class="line" id="LC17">&nbsp;</div><div class="line" id="LC18"><span class="c1"># write data</span></div><div class="line" id="LC19"><span class="n">accounts</span><span class="o">.</span><span class="n">sort_by</span> <span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span> <span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">account</span><span class="o">|</span></div><div class="line" id="LC20">&nbsp;&nbsp;<span class="n">name_formatter</span> <span class="o">=</span> <span class="s2">&quot;%-</span><span class="si">#{</span><span class="n">max_name</span><span class="si">}</span><span class="s2">s&quot;</span></div><div class="line" id="LC21">&nbsp;&nbsp;<span class="n">balance_formatter</span> <span class="o">=</span> <span class="n">account</span><span class="o">.</span><span class="n">balance</span> <span class="p">?</span> <span class="s2">&quot;%</span><span class="si">#{</span><span class="n">max_balance</span><span class="si">}</span><span class="s2">.2f&quot;</span> <span class="p">:</span> <span class="s2">&quot;%s&quot;</span></div><div class="line" id="LC22">&nbsp;&nbsp;<span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">name_formatter</span><span class="si">}</span><span class="s2">  </span><span class="si">#{</span><span class="n">balance_formatter</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="o">[</span><span class="n">account</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">balance</span><span class="o">]</span></div><div class="line" id="LC23"><span class="k">end</span></div></pre></div>\
        </div>\
        <div class="gist-meta">\
          <a href="http://gist.github.com/raw/4005/1071027e270b4f65c59e583621d62154028fc075" style="float:right;">view raw</a>\
          <a href="http://gist.github.com/4005">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.\
        </div>\
      </div>\
</div>')
